gdtr:
dw 0 ; For limit storage
dd 0 ; For base storage

mov   AX, gdtr
mov   [ebx], AX
mov   EAX, [ESP + 8]
mov   [ebx + 2], EAX
ret

reloadSegments:
JMP   0x08:.reload_CS ; 0x08 is a stand-in for your code segment
.reload_CS:
MOV   AX, 0x10 ; 0x10 is a stand-in for your data segment
MOV   DS, AX
MOV   ES, AX
MOV   FS, AX
MOV   GS, AX
MOV   SS, AX
RET

